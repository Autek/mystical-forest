<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="generator" content="pandoc">
    <meta name="description" content="">

    <title>Final Project Report CS-341 2025</title>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="css/bootstrap.min.css">

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <link href="ie10-viewport-bug-workaround.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="css/dashboard.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <style type="text/css">code{white-space: pre;}</style>
    <style type="text/css">.sidebar ul{padding-left: 10px;}</style>
    <link rel="stylesheet" href="css/cg_report.css" />
  </head>

  <body>

    <div class="container-fluid">
      <div class="row">
        <div id="sidebar" class="col-sm-3 col-md-2 sidebar">
          <!--<ul class="nav nav-sidebar">
            <li class="active"><a href="#">Overview <span class="sr-only">(current)</span></a></li>
          </ul>-->
          <ul>
          <li><a href="#mystical-forest"
          id="toc-mystical-forest">Mystical Forest</a>
          <ul>
          <li><a href="#abstract" id="toc-abstract">Abstract</a></li>
          <li><a href="#overview" id="toc-overview">Overview</a></li>
          <li><a href="#feature-validation"
          id="toc-feature-validation">Feature validation</a>
          <ul>
          <li><a href="#ambient-occlusion"
          id="toc-ambient-occlusion">Ambient Occlusion</a></li>
          <li><a href="#particle-effects"
          id="toc-particle-effects">Particle Effects</a></li>
          <li><a href="#fog" id="toc-fog">Fog</a></li>
          <li><a href="#l-systems-for-procedural-scene-generation"
          id="toc-l-systems-for-procedural-scene-generation">L-Systems
          for Procedural Scene Generation</a></li>
          <li><a href="#bloom" id="toc-bloom">Bloom</a></li>
          </ul></li>
          <li><a href="#discussion" id="toc-discussion">Discussion</a>
          <ul>
          <li><a href="#additional-components"
          id="toc-additional-components">Additional Components</a></li>
          <li><a href="#failed-experiments"
          id="toc-failed-experiments">Failed Experiments</a></li>
          <li><a href="#challenges"
          id="toc-challenges">Challenges</a></li>
          </ul></li>
          <li><a href="#contributions"
          id="toc-contributions">Contributions</a></li>
          <li><a href="#references"
          id="toc-references">References</a></li>
          </ul></li>
          </ul>
        </div>
        <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
        
<h1 id="mystical-forest">Mystical Forest</h1>
<div>
<video src="videos/demo_teaser.mp4" height="300px" autoplay loop>
</video>
</div>
<figcaption style="text-align: center;">
A short teaser video, gif, or image showing an overview of the final
result.
</figcaption>
<h2 id="abstract">Abstract</h2>
<p>In our project Mystical Forest, we have create a foggy, mystical
forest, with a calming fire. We used ambient occlusion and fog to create
a dim atmosphere, and added a fire generated with particles and bloom to
enhance the light it produces. The trees are L-systems generated
simulate a real forest.</p>
<h2 id="overview">Overview</h2>
<div
style="display: flex; justify-content: space-around; align-items: center;">
<div>
<p><img src="images/demo_detail.png" height="210px" style="vertical-align: middle;"></p>
</div>
<div>
<video src="videos/demo_detail.mp4" height="210px" autoplay loop style="vertical-align: middle;">
</video>
</div>
</div>
<figcaption style="text-align: center;">
Some more visuals focusing on interesting details of your scene.
</figcaption>
<p>We generated the trees procedurally using L-systems. This means they
can be easily modified to create different types of trees, or other
plants. blablabla <span class="citation"
data-cites="coaguila">@coaguila</span> fill in this part.</p>
<p>We also added a fog to create a more immersive atmosphere. The fog is
implemented using a fragment shader that calculates the fog density
based on the distance from the camera, and applies it to the scene. This
gives a sense of depth and mystery to the forest, which is really cool
to see.</p>
<p>To add even more to the atmosphere, and because it’s an interesting
effect, we added screen-space ambient occlusion. This creates a more
realistic lighting by simulating how light interacts with nearby
environment, especially in the corners and crevices that we have on the
trees. It gives a nice depth to the scene.</p>
<p>Finally, we added a fire using particles. blablabla <span
class="citation" data-cites="Autek">@Autek</span> fill in this part.</p>
<p>The terrain was made by hand in Blender, and we used the given shader
to apply texture to it.</p>
<h2 id="feature-validation">Feature validation</h2>
<table>
<caption>
Feature Summary
</caption>
<thead>
<tr>
<th>
Feature
</th>
<th>
Adapted Points
</th>
<th>
Status
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
Ambient Occlusion
</td>
<td>
17
</td>
<td style="background-color: #d4edda;">
Completed
</td>
</tr>
<tr>
<td>
Particle Effects
</td>
<td>
17
</td>
<td style="background-color: #d4edda;">
Completed
</td>
</tr>
<tr>
<td>
Fog
</td>
<td>
4
</td>
<td style="background-color: #d4edda;">
Completed
</td>
</tr>
<tr>
<td>
L-Systems for Procedural Scene Generation
</td>
<td>
8
</td>
<td style="background-color: #d4edda;">
Completed
</td>
</tr>
<tr>
<td>
Bloom
</td>
<td>
4
</td>
<td style="background-color: #d4edda;">
Completed
</td>
</tr>
</tbody>
</table>
<h3 id="ambient-occlusion">Ambient Occlusion</h3>
<h4 id="implementation">Implementation</h4>
<p>The ambient occlusion is implemented in screen space by using a
fragment shader that samples the depth buffer to compute the occlusion
factor: it compares the depth of the current fragment with the depth of
nearby fragments to determine how much light is occluded. We then apply
that factor to the ambient light of the scene to reduce it in areas that
should be dimmed. A bias is applied to deal with acnee, and a later blur
pass smoothes the result to avoid harsh edges.</p>
<p>The occlusion factor is computed in three passes: 1. <strong>G-buffer
pass:</strong> we render the scene to a G-buffer with three textures in
different color attachement (position, normal and albedo). We couldn’t
use the syntax given in the OpenGL tutorial since we are working in
WEBGL1.0 instead of WEBGL2.0. This is done in
<code>gbuffer_sr.js</code>, <code>gbuffer.vert.glsl</code> and
<code>gbuffer,frag.glsl</code>.</p>
<!-- todo: add images of different parts of the gbuffer -->
<ol start="2" type="1">
<li><strong>SSAO pass:</strong> this pass computes the ambient occlusion
factor. In <code>ssao_sr.js</code>, we generate a kernel of random
samples and pass it to the shaders. The vertex shader is a simple buffer
to screen but the fragment shader <code>ssao.frag.glsl</code> computes
the occulsion factor: it iterates on the random samples, gets the value
of the G-buffer at that point and only increments the occlusion factor
if needed.</li>
</ol>
<!-- todo: add images of only ssao buffer -->
<ol type="1">
<li><em>(optional)</em> <strong>Blur pass:</strong> this pass smoothes
the result of the SSAO pass to avoid harsh edges. It applies a 4x4 box
blur to the SSAO texture. This is done in <code>blur_sr.js</code>,
<code>buffer_to_screen.vert.glsl</code> and <code>blur.frag.glsl</code>.
We found that a box blur was sufficient for our needs since SSAO is
already a discreet effect so the diffence between box blur and guassian
blur was not visible.</li>
</ol>
<!-- todo: add images of blur on ssao -->
<p>After having computed the ambient occlusion factor, we integrate it
to the scene in the Blinn-Phong shader by multiplying it with the
ambient light component.</p>
<h4 id="validation">Validation</h4>
<p>TODO</p>
<h3 id="particle-effects">Particle Effects</h3>
<h4 id="implementation-1">Implementation</h4>
<p>This implementation simulates dynamic fire particles using instanced,
textured quads that evolve and fade over time. Each particle is rendered
as a camera-facing billboard, with GPU rendering and CPU simulation. A
fire emitter spawns and evolves over time, with configurable parameters
for size, lifespan, emission rate, color options, speed, fire
radius.</p>
<hr />
<h5 id="pipeline-structure">Pipeline Structure</h5>
<ul>
<li>A FireEmitter extends a general ParticleEmitter class.</li>
<li>A FireEmitter manages particle state: position, velocity, life,
color, spawn radius, size.</li>
<li>On each frame:
<ul>
<li>Dead particles are culled.</li>
<li>New ones are spawned based on emissionRate.</li>
<li>Attributes are updated using remaining lifetime (RGB and
alpha).</li>
</ul></li>
<li>Results are exported into two arrays: positions (vec4: x, y, z,
size) and colors (RGBA uint8).</li>
<li>A base quad (2D unit square) is instanced per particle.</li>
<li>Quads are billboarded in the vertex shader.</li>
<li><h2
id="alpha-blending-is-enabled-for-additive-effects-this-works-well-for-flames-and-will-benefit-from-bloom.">Alpha
blending is enabled for additive effects this works well for flames and
will benefit from bloom.</h2></li>
</ul>
<h5 id="design-choices">Design Choices</h5>
<ul>
<li>CPU simulation: because it is simpler than compute shaders and
sufficient for our use.</li>
</ul>
<h4 id="validation-1">Validation</h4>
<div>
<video src="videos/fire.mp4" height="210px" autoplay loop style="vertical-align: middle;">
</video>
</div>
<p>In the preceding video, we observe a basic fire simulation and a
preview of all available parameters and how they influence the fire’s
behavior. Reducing the particle lifespan creates a flickering effect
like fireworks. This happens because each particle is assigned a
lifetime upon creation. When we shorten the lifespan, the color
calculations based on <code>(life / maxLife)</code> can yield values
greater than one, since <code>life</code> may exceed
<code>maxLife</code>. It’s not a major issue, as the effect normalizes
quickly.</p>
<div>
<video src="videos/fire_in_scene.mp4" height="210px" autoplay loop style="vertical-align: middle;">
</video>
</div>
<p>In the preceding video we can see how the fire integrates to the main
scene. Everything looks pretty well together. Trees are overly bright on
top but that is not an issue of the fire and has been fixed since.</p>
<div>
<video src="videos/fire_fog.mp4" height="210px" autoplay loop style="vertical-align: middle;">
</video>
</div>
<p>In the preceding video we can see fog getting over the particles if
there is a lot of fog (when we can see far withohitting the ground) This
is a known issue and we don’t really know how to fix it easily.</p>
<h3 id="fog">Fog</h3>
<h4 id="implementation-2">Implementation</h4>
<p>TODO</p>
<h4 id="validation-2">Validation</h4>
<p>TODO</p>
<h3 id="l-systems-for-procedural-scene-generation">L-Systems for
Procedural Scene Generation</h3>
<h4 id="implementation-3">Implementation</h4>
<p>TODO</p>
<h4 id="validation-3">Validation</h4>
<p>TODO</p>
<h3 id="bloom">Bloom</h3>
<h4 id="implementation-4">Implementation</h4>
<p>TODO</p>
<h4 id="validation-4">Validation</h4>
<p>TODO</p>
<h2 id="discussion">Discussion</h2>
<h3 id="additional-components">Additional Components</h3>
<p>TODO</p>
<h3 id="failed-experiments">Failed Experiments</h3>
<p>TODO</p>
<h3 id="challenges">Challenges</h3>
<p>TODO</p>
<h2 id="contributions">Contributions</h2>
<table>
<caption>
Worked hours
</caption>
<thead>
<tr>
<th>
Name
</th>
<th>
Week 1
</th>
<th>
Week 2
</th>
<th>
Week 3
</th>
<th>
Week 4
</th>
<th>
Week 5
</th>
<th>
Week 6
</th>
<th>
Week 7
</th>
<th>
Total
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
Alonso
</td>
<td>
3h
</td>
<td style="background-color: #f0f0f0;">
2h
</td>
<td>
4h
</td>
<td>
14h
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td>
Charlie
</td>
<td>
2h
</td>
<td style="background-color: #f0f0f0;">
0h
</td>
<td>
8h
</td>
<td>
12h
</td>
<td>
8h
</td>
<td>
3h
</td>
<td>
7h
</td>
<td>
40h
</td>
</tr>
<tr>
<td>
Marius
</td>
<td>
2h
</td>
<td style="background-color: #f0f0f0;">
0h
</td>
<td>
2h
</td>
<td>
9h30
</td>
<td>
8h
</td>
<td>
4h
</td>
<td>
18h30
</td>
<td>
44h
</td>
</tr>
</tbody>
</table>
<table>
<caption>
Individual contributions
</caption>
<thead>
<tr>
<th>
Name
</th>
<th>
Contribution
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
Alonso
</td>
<td>
1/3
</td>
</tr>
<tr>
<td>
Charlie
</td>
<td>
1/3
</td>
</tr>
<tr>
<td>
Marius
</td>
<td>
1/3
</td>
</tr>
</tbody>
</table>
<h4 id="comments">Comments</h4>
<p>TODO</p>
<h2 id="references">References</h2>
<h4 id="screen-space-ambient-occlusion">Screen-Space Ambient
Occlusion</h4>
<ul>
<li>TODO <!--! todo  --> #### Particle Effects</li>
<li><a href="https://www.youtube.com/watch?v=5k-8ltGNUXk">MographPlus
(2017) <em>Tutorial No.62 : Rendering realistic Explosion and Smoke in
Arnold for 3ds Max (Arnold Volume)</em></a></li>
<li><a href="https://www.youtube.com/watch?v=pzAZ0xjWDv8">OGLDEV (2025)
Particle System Using The Compute Shader // Intermediate OpenGL
Series</a></li>
<li><a
href="https://www.opengl-tutorial.org/intermediate-tutorials/billboards-particles/">OpenGL-Tutorial/Particles</a></li>
<li><a
href="https://learnopengl.com/In-Practice/2D-Game/Particles">LearnOpenGL/Particles</a></li>
<li><a href="https://regl-project.github.io/regl/www/gallery.html">Regl
Example Gallery, instance-triangle.js</a></li>
</ul>
<h4 id="fog-1">Fog</h4>
<ul>
<li><a href="https://youtu.be/BYbIs1C7rkM?feature=shared">OGLDEV (2022)
<em>Mastering Fog Rendering in OpenGL: Adding Depth and Atmosphere to
Your Graphics (part 2/2)</em></a></li>
<li><a href="https://dl.acm.org/doi/pdf/10.1145/280953.282233">Legakis,
J. (1998) <em>Fast Multi Layer Fog</em> (SIGGRAPH ’98: ACM SIGGRAPH
98)</a></li>
</ul>
<h4 id="l-systems-for-procedural-scene-generation-1">L-Systems for
Procedural Scene Generation</h4>
<ul>
<li><a href="https://www.youtube.com/watch?v=feNVBEPXAcE">SimonDev
(2020) <em>Procedural Plant Generation with L-Systems</em></a></li>
<li><a
href="https://algorithmicbotany.org/papers/modeling-plant-development-with-l-systems.pdf">P.
Prusinkiewicz, M. Cieslak, P. Ferraro, J. Hanan (2018) <em>Modeling
Plant Development with L-Systems</em></a></li>
</ul>
<h4 id="bloom-1">Bloom</h4>
<ul>
<li><a href="https://learnopengl.com/Advanced-Lighting/Bloom">Joey
DeVries (2015) <em>Advanced Lighting: Bloom</em></a></li>
<li><a href="https://www.youtube.com/watch?v=SqvPzbvfZEs">3Angle (2024)
<em>WebGL Game Part 19 - Bloom Effect</em></a></li>
<li><a href="https://www.youtube.com/watch?v=tI70-HIc5ro">The Cherno
(2021) <em>Bloom.</em></a></li>
</ul>
        </div>
      </div>
    </div>
    
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="js/jquery.min.js"></script>
		<script src="js/bootstrap.min.js"></script>
    <script>
        //document.getElementById('sidebar').getElementsByTagName('ul')[0].className += "nav nav-sidebar";
        
        /* ajust the height when click the toc
           the code is from https://github.com/twbs/bootstrap/issues/1768
        */
        var shiftWindow = function() { scrollBy(0, -50) };
        window.addEventListener("hashchange", shiftWindow);
        function load() { if (window.location.hash) shiftWindow(); }
        
        /*add Bootstrap styles to tables*/
        var tables = document.getElementsByTagName("table");
        for(var i = 0; i < tables.length; ++i){
            tables[i].className += "table table-bordered table-hover";
        }
    </script>
  </body>
</html>
